    </div>
    </section>

    <footer class="py-16 border-t border-[#222] bg-black">
        <div class="max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-3 gap-10 md:gap-4 items-center">
            
            <div class="text-center md:text-left order-3 md:order-1">
                <p class="serif text-xl text-white">ANFEROV.</p>
                <p class="text-[10px] text-gray-600 mt-2 uppercase tracking-widest">Saint Petersburg / Worldwide</p>
                <p class="text-gray-800 text-[10px] mt-6 md:mt-2">© 2026. All rights reserved.</p>
            </div>
            
            <div class="flex flex-col items-center justify-center gap-4 order-1 md:order-2">
                 <a href="#" class="flex items-center gap-3 group">
                     <div class="w-8 h-8 rounded-full border border-white/20 flex items-center justify-center group-hover:bg-white/10 transition-colors">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-white"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
                     </div>
                     <span class="text-[10px] text-gray-400 uppercase tracking-widest group-hover:text-white transition-colors">Следите за моими новыми работами</span>
                </a>
            </div>

            <div class="flex justify-center md:justify-end gap-6 order-2 md:order-3">
                 <a href="#" class="text-[10px] text-gray-500 uppercase tracking-widest hover:text-white transition-colors">Telegram</a>
                 <a href="#" class="text-[10px] text-gray-500 uppercase tracking-widest hover:text-white transition-colors">Instagram</a>
            </div>

        </div>
    </footer>

    <div id="modal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity duration-300 opacity-0" id="modal-bg" onclick="closeModal()"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-[420px] p-4 transition-all duration-300 opacity-0 scale-95" id="modal-content">
            <div class="liquid-glass p-8 relative">
                <div class="liquid-content">
                    <button onclick="closeModal()" class="absolute top-5 right-5 text-gray-400 hover:text-white transition-transform hover:rotate-90"><span class="material-symbols-outlined">close</span></button>
                    <div class="mb-8 text-center">
                        <h3 class="text-2xl font-serif italic text-white">Оставить заявку</h3>
                        <p class="text-xs text-gray-500 mt-2 tracking-widest uppercase" id="modal-desc">Тариф: Standard</p>
                    </div>
                    <form onsubmit="event.preventDefault(); submitForm(this);" class="space-y-4" novalidate>
                        <input type="text" name="name" placeholder="Имя" class="w-full input-liquid px-4 py-3 text-sm placeholder-gray-400">
                        <input type="tel" name="phone" placeholder="+7" class="w-full input-liquid px-4 py-3 text-sm placeholder-gray-400">
                        <textarea placeholder="Комментарий" class="w-full input-liquid px-4 py-3 text-sm min-h-[80px] placeholder-gray-400 mb-4"></textarea>
                        
                        <div class="grid grid-cols-3 gap-2">
                             <label class="cursor-pointer">
                                 <input type="radio" name="contact" value="tg" class="contact-chip hidden" checked>
                                 <div class="liquid-glass liquid-btn py-3 text-center text-[9px] uppercase font-bold text-gray-400 transition-all hover:bg-white/5"><span>Telegram</span></div>
                             </label>
                             <label class="cursor-pointer">
                                 <input type="radio" name="contact" value="wa" class="contact-chip hidden">
                                 <div class="liquid-glass liquid-btn py-3 text-center text-[9px] uppercase font-bold text-gray-400 transition-all hover:bg-white/5"><span>WhatsApp</span></div>
                             </label>
                             <label class="cursor-pointer">
                                 <input type="radio" name="contact" value="call" class="contact-chip hidden">
                                 <div class="liquid-glass liquid-btn py-3 text-center text-[9px] uppercase font-bold text-gray-400 transition-all hover:bg-white/5"><span>Звонок</span></div>
                             </label>
                        </div>

                        <button type="submit" class="w-full mt-2 py-4 liquid-glass liquid-btn shimmer-10s group">
                            <span class="liquid-content text-[10px] font-bold uppercase tracking-[0.2em] text-white">Отправить</span>
                        </button>
                    </form>

                    <div class="mt-8 pt-6 border-t border-white/10">
                         <p class="text-[10px] uppercase tracking-widest text-center text-gray-500 mb-4">или напишите мне лично</p>
                         <div class="grid grid-cols-2 gap-3">
                             <a href="#" class="liquid-glass liquid-btn py-3 flex items-center justify-center gap-2 group">
                                 <span class="liquid-content text-[10px] uppercase font-bold text-gray-300 group-hover:text-white">Telegram</span>
                             </a>
                             <a href="#" class="liquid-glass liquid-btn py-3 flex items-center justify-center gap-2 group">
                                 <span class="liquid-content text-[10px] uppercase font-bold text-gray-300 group-hover:text-white">WhatsApp</span>
                             </a>
                         </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const BASE_GALLERY_PATH = "images/gallery/"; 

        const globalObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => { 
                if (entry.isIntersecting) entry.target.classList.add('active');
            });
        }, { threshold: 0.1 });

        async function loadGalleryConfig() {
            try {
                const response = await fetch('config.json');
                if (!response.ok) throw new Error('Failed to load config.json');
                const data = await response.json();
                initGallery(data);
            } catch (error) {
                console.error("Error loading gallery configuration:", error);
            }
        }

        function initGallery(collectionsData) {
            const desktopContainer = document.getElementById('desktop-gallery-container');
            const mobileContainer = document.getElementById('mobile-gallery-container');
            
            const slideData = collectionsData.map((col, index) => {
                const imgArray = [];
                for(let i = 0; i < col.count; i++) {
                    imgArray.push(`${BASE_GALLERY_PATH}${col.folder}/${i}.jpg`);
                }
                return {
                    id: `set-${index}`,
                    title: col.title,
                    images: imgArray
                };
            });

            const renderCard = (slide, idPrefix, isMobile, delayIndex = 0) => {
                const imagesHtml = slide.images.map((src, i) => `<img src="${src}" class="xf-img ${i===0?'active':''}">`).join('');
                const barsHtml = slide.images.map((_, i) => `<div class="story-bar ${i===0?'active':''}" id="${idPrefix}-bar-${slide.id}-${i}"></div>`).join('<div class="w-1"></div>');
                const revealClass = isMobile ? '' : `reveal delay-${(delayIndex%4)*100}`;
                
                // UPDATED: Added snap-force-stop class to the mobile card
                const containerClass = isMobile 
                    ? `relative shrink-0 snap-center snap-force-stop w-[85vw] h-full liquid-glass mobile-glass-trigger`
                    : `relative w-full aspect-[3/4] liquid-glass ${revealClass}`;
                
                return `
                <div id="${idPrefix}-${slide.id}" class="${containerClass}">
                    <div class="img-isolation">
                        <div class="slideshow absolute inset-0 w-full h-full">
                            ${imagesHtml}
                            <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-60 z-10 pointer-events-none"></div>
                        </div>
                    </div>
                    <div class="absolute bottom-0 left-0 w-full p-6 z-20 flex flex-col justify-end pointer-events-none">
                        <div class="flex items-center w-full mb-3 opacity-90">${barsHtml}</div>
                        <h3 class="text-xl font-sans font-light uppercase tracking-widest text-white leading-none">${slide.title}</h3>
                    </div>
                </div>`;
            };

            if (desktopContainer) {
                desktopContainer.innerHTML = slideData.map((slide, i) => renderCard(slide, 'desktop', false, i)).join('');
                setTimeout(() => {
                    const newCards = desktopContainer.querySelectorAll('.reveal');
                    const galleryObserver = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if(entry.isIntersecting) {
                                entry.target.classList.add('active');
                                galleryObserver.unobserve(entry.target);
                            }
                        });
                    }, { threshold: 0.1 }); 
                    newCards.forEach(card => {
                        card.classList.remove('active');
                        galleryObserver.observe(card);
                    });
                }, 100); 
            }

            if (mobileContainer) {
                const infiniteData = [...slideData, ...slideData, ...slideData];
                mobileContainer.innerHTML = infiniteData.map((slide, i) => {
                    const tempSlide = {...slide, id: slide.id + '-clone-' + i}; 
                    return renderCard(tempSlide, 'mobile', true);
                }).join('');
                setTimeout(() => { mobileContainer.scrollLeft = mobileContainer.scrollWidth / 3; }, 100);
            }

            setInterval(() => {
                if(document.hidden) return;
                const allCards = document.querySelectorAll('[id^="desktop-set-"], [id^="mobile-set-"]');
                allCards.forEach(card => {
                    const imgs = card.querySelectorAll('.xf-img'); if(imgs.length===0) return;
                    let activeIndex = 0; imgs.forEach((img, i) => { if (img.classList.contains('active')) activeIndex = i; });
                    const nextIndex = (activeIndex + 1) % imgs.length;
                    
                    imgs[activeIndex].classList.remove('active'); imgs[nextIndex].classList.add('active');
                    
                    const bars = card.querySelectorAll('.story-bar');
                    if(bars[activeIndex]) bars[activeIndex].classList.remove('active');
                    if(bars[nextIndex]) bars[nextIndex].classList.add('active');
                });
            }, 4000);
            
            handleMobileGlass();
        }

        window.toggleFaq = function(el) { el.classList.toggle('active'); el.querySelector('.faq-grid').classList.toggle('open'); }
        const slides = document.querySelectorAll('.testimonial-slide');
        let slideIndex = 0;
        if(slides.length > 0) { setInterval(() => { slides[slideIndex].classList.remove('active'); slideIndex = (slideIndex+1)%slides.length; slides[slideIndex].classList.add('active'); }, 10000); }
        
        let mobileObserver = null;
        function handleMobileGlass() {
            const triggers = document.querySelectorAll('.mobile-glass-trigger');
            if (window.innerWidth >= 768) { 
                if (mobileObserver) { mobileObserver.disconnect(); mobileObserver = null; } 
                triggers.forEach(el => el.classList.remove('liquid-active')); 
                return; 
            }
            if (!mobileObserver) { 
                mobileObserver = new IntersectionObserver((entries) => { 
                    entries.forEach(entry => { 
                        entry.target.classList.toggle('liquid-active', entry.isIntersecting); 
                    }); 
                }, { rootMargin: "-45% 0px -45% 0px", threshold: 0 }); 
                triggers.forEach(el => mobileObserver.observe(el)); 
            }
        }

        window.toggleMenu = function() { 
            const menu = document.getElementById('mobile-menu');
            const btn = document.getElementById('burger-btn');
            
            menu.classList.toggle('translate-x-full'); 
            btn.classList.toggle('menu-open'); 
            
            if(menu.classList.contains('translate-x-full')) {
                document.body.classList.remove('menu-open');
                document.body.style.overflow = '';
            } else {
                document.body.classList.add('menu-open');
                document.body.style.overflow = 'hidden';
            }
        }

        window.openModal = function() { 
            const m = document.getElementById('modal'), bg = document.getElementById('modal-bg'), c = document.getElementById('modal-content'); 
            const btnStandard = document.getElementById('btn-standard');
            if(btnStandard) btnStandard.classList.remove('shimmer-5s');

            m.classList.remove('hidden'); 
            setTimeout(() => { bg.classList.remove('opacity-0'); c.classList.remove('opacity-0', 'scale-95'); c.classList.add('opacity-100', 'scale-100'); }, 10); 
        }

        window.closeModal = function() { 
            const m = document.getElementById('modal'), bg = document.getElementById('modal-bg'), c = document.getElementById('modal-content'); 
            const btnStandard = document.getElementById('btn-standard');
            if(btnStandard) btnStandard.classList.add('shimmer-5s');

            bg.classList.add('opacity-0'); c.classList.remove('opacity-100', 'scale-100'); c.classList.add('opacity-0', 'scale-95'); 
            setTimeout(() => m.classList.add('hidden'), 300); 
        }

        window.selectTariff = function(name) { openModal(); document.getElementById('modal-desc').innerText = `Тариф: ${name}`; }
        
        window.submitForm = function(form) { 
            const nameInput = form.querySelector('input[name="name"]');
            const phoneInput = form.querySelector('input[name="phone"]');
            let isValid = true;

            if(nameInput.value.trim().length < 2) {
                nameInput.classList.add('input-error');
                setTimeout(() => nameInput.classList.remove('input-error'), 1000);
                isValid = false;
            }

            const phoneVal = phoneInput.value.replace(/\D/g, '');
            if(phoneVal.length !== 11 || !phoneInput.value.startsWith('+7')) {
                phoneInput.classList.add('input-error');
                setTimeout(() => phoneInput.classList.remove('input-error'), 1000);
                isValid = false;
            }

            if(!isValid) return;

            const btn = form.querySelector('button[type="submit"] span'); 
            const originalText = btn.innerText; 
            btn.innerText = 'Отправлено!'; 
            setTimeout(() => { closeModal(); btn.innerText = originalText; form.reset(); }, 1500); 
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.reveal').forEach(el => globalObserver.observe(el));
            loadGalleryConfig();
            handleMobileGlass();

            const phoneInput = document.querySelector('input[name="phone"]');
            if(phoneInput) {
                phoneInput.addEventListener('input', (e) => {
                    let val = e.target.value.replace(/\D/g, '');
                    if (val.length > 0 && val[0] !== '7') { val = '7' + val; }
                    if (val === '') val = '7';
                    if (val.length > 11) val = val.slice(0, 11);
                    e.target.value = '+' + val;
                });
                phoneInput.addEventListener('focus', (e) => {
                    if(!e.target.value) e.target.value = '+7';
                });
            }
        });
        window.addEventListener('resize', handleMobileGlass);
    </script>
</body>
</html>